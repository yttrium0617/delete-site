<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8">
  <title>æŠ•ç¨¿å‰Šé™¤ãƒ•ã‚©ãƒ¼ãƒ </title>
  <meta name="viewport" content="width=device-width, initial-scale=1.0">
  <style>
    body {
      font-family: sans-serif;
      background: #f0f0f0;
      padding: 30px;
      max-width: 500px;
      margin: auto;
    }
    h1 {
      text-align: center;
      margin-bottom: 20px;
    }
    label {
      font-weight: bold;
      display: block;
      margin-top: 15px;
    }
    input {
      width: 100%;
      padding: 10px;
      font-size: 1em;
      margin-top: 5px;
      box-sizing: border-box;
    }
    button {
      margin-top: 20px;
      padding: 12px;
      width: 100%;
      font-size: 1em;
      background: #d9534f;
      color: white;
      border: none;
      border-radius: 5px;
      cursor: pointer;
    }
    .message {
      margin-top: 20px;
      padding: 10px;
      background: #fff;
      border-radius: 5px;
      text-align: center;
    }
  </style>
</head>
<body>

  <h1>ğŸ—‘ æŠ•ç¨¿å‰Šé™¤ãƒ•ã‚©ãƒ¼ãƒ </h1>
  <p>ã‚²ãƒ¼ãƒ æŠ•ç¨¿ã®ã€Œã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼ˆæŠ•ç¨¿IDï¼‰ã€ã¨ã€Œå‰Šé™¤ã‚­ãƒ¼ã€ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„ã€‚</p>

  <label for="gameId">ã‚²ãƒ¼ãƒ IDï¼ˆã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—ï¼‰</label>
  <input type="text" id="gameId" placeholder="ä¾‹ï¼š2025/06/26 10:12:34">

  <label for="deleteKey">å‰Šé™¤ã‚­ãƒ¼</label>
  <input type="password" id="deleteKey" placeholder="æŠ•ç¨¿æ™‚ã«è¨­å®šã—ãŸå‰Šé™¤ã‚­ãƒ¼">

  <button onclick="attemptDelete()">å‰Šé™¤ã™ã‚‹</button>

  <div class="message" id="messageBox"></div>

  <script>
    const SHEET_API = "https://sheetdb.io/api/v1/ir988y81fa5qp";

    async function attemptDelete() {
      const gameId = document.getElementById('gameId').value.trim();
      const deleteKey = document.getElementById('deleteKey').value.trim();
      const messageBox = document.getElementById('messageBox');

      if (!gameId || !deleteKey) {
        messageBox.innerHTML = "âš  ã‚²ãƒ¼ãƒ IDã¨å‰Šé™¤ã‚­ãƒ¼ã‚’å…¥åŠ›ã—ã¦ãã ã•ã„";
        return;
      }

      messageBox.innerHTML = "ğŸ” æŠ•ç¨¿ã‚’ç¢ºèªä¸­...";

      // ãƒ‡ãƒ¼ã‚¿å–å¾—
      const res = await fetch(SHEET_API);
      const data = await res.json();

      // ã‚²ãƒ¼ãƒ IDã¨å‰Šé™¤ã‚­ãƒ¼ãŒä¸€è‡´ã™ã‚‹æŠ•ç¨¿ã‚’æ¢ã™
      const target = data.find(row => row['ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—'] === gameId && row['å‰Šé™¤ã‚­ãƒ¼'] === deleteKey);

      if (!target) {
        messageBox.innerHTML = "âŒ ä¸€è‡´ã™ã‚‹æŠ•ç¨¿ãŒè¦‹ã¤ã‹ã‚Šã¾ã›ã‚“ã€‚ã‚²ãƒ¼ãƒ IDã¨å‰Šé™¤ã‚­ãƒ¼ã‚’ç¢ºèªã—ã¦ãã ã•ã„ã€‚";
        return;
      }

      // ä¸€è‡´ã—ãŸã‚‰å‰Šé™¤
      const deleteUrl = `${SHEET_API}/ã‚¿ã‚¤ãƒ ã‚¹ã‚¿ãƒ³ãƒ—/${encodeURIComponent(gameId)}`;
      const deleteRes = await fetch(deleteUrl, { method: "DELETE" });

      if (deleteRes.ok) {
        messageBox.innerHTML = "âœ… æŠ•ç¨¿ã‚’å‰Šé™¤ã—ã¾ã—ãŸã€‚ãƒšãƒ¼ã‚¸ã‚’å†èª­ã¿è¾¼ã¿ã—ã¦ãã ã•ã„ã€‚";
      } else {
        messageBox.innerHTML = "âš  å‰Šé™¤ã«å¤±æ•—ã—ã¾ã—ãŸã€‚ã‚‚ã†ä¸€åº¦è©¦ã—ã¦ãã ã•ã„ã€‚";
      }
    }
  </script>

</body>
</html>
